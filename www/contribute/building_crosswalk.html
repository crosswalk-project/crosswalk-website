<!DOCTYPE html>
<html id="top" lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>The Crosswalk Project</title>
    <link rel="shorcut icon" href="/assets/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" />
    <script>
      WebFontConfig = {
        custom: {
          families: ['Clear Sans'],
          urls: ['/css/fonts.css']
        },
        google: {
          families: ['Source Code Pro:n4,n6']
        },
        timeout: 2000
      };
    </script>
    <script async defer src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script async defer src="//ajax.googleapis.com/ajax/libs/webfont/1.5.3/webfont.js"></script>
    <link rel="stylesheet" href="/css/main.css">

    <meta name="description" content="Enable the most advanced web innovations with the Crosswalk Project web runtime to develop powerful Android and Cordova apps." />
    <meta name="author" content="Crosswalk" />
    <meta name="handheldfriendly" content="true" />
    <meta name="mobileoptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="cleartype" content="on" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <!-- Facebook -->
    <meta property="og:side_name" content="Crosswalk" />
    <meta property="og:title" content="Building Crosswalk" />
    <meta property="og:url" content="http://crosswalk-project.org/contribute/building_crosswalk" />
    <meta property="og:description" content="Enable the most advanced web innovations with the Crosswalk Project web runtime to develop powerful Android and Cordova apps." />
    <meta property="og:image" content="/assets/crosswalk-og-banner.jpg" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:url" content="http://crosswalk-project.org/contribute/building_crosswalk" />
    <meta name="twitter:title" content="Building Crosswalk" />
    <meta name="twitter:description" content="Enable the most advanced web innovations with the Crosswalk Project web runtime to develop powerful Android and Cordova apps." />
    <meta name="twitter:site" content="@xwalk_project" />

    <!-- Relevant original Crosswalk Project JS -->
    <script src="/js/utils.js"></script>
    <script src="/js/xwalk.js"></script>
    <script src="/js/versions.js"></script>

  </head>
  <body>
    <!-- If the current page is an index less than two
         directories deep or in the root directory,
         leave it alone so we can do custom layouts.
         Otherwise, provide the header and nav. -->
    
    <div class="container">
      <div class="doc-header">
        

  

  <div class="doc-logo-div">
     <a href="/" class="doc-logo-link">
       <img src="/assets/identity/crosswalkproject-logo-horizontal-dark.png" class="doc-logo-img">
     </a>
  </div>
  <div class="doc-nav-div">
    <ul class="doc-nav-list">
      <li class="doc-nav-item">
        <a href="/documentation/getting_started.html" class="doc-nav-link">Documentation</a>
      </li>
      <li class="doc-nav-item">
        <a href="/blog" class="doc-nav-link">Blog</a>
      </li>
      <li class="doc-nav-item">
        <a href="/contribute" class="doc-nav-link">Contribute</a>
      </li>
      <li class="doc-nav-item">
        <a href="https://github.com/crosswalk-project/crosswalk-website/wiki" class="doc-nav-link">Wiki</a>
      </li>
      <li class="doc-nav-item hide-on-small">
        <a href="/documentation/about/faq.html" class="doc-nav-link">FAQ</a>
      </li>
      <li class="doc-nav-item hide-on-small">
        <a href="/documentation/getting_started.html" class="doc-nav-link" style="border:1px solid #ec543b;padding:8px;color:#ec543b;" >get started</a>
      </li>
    </ul>
  </div>
  

      </div>
      <br />
      <div class="doc-main">
        <div class="row">
          
          <nav id="contents" class="article-toc nav-toggleContainer">
  <a href="#contents" id="contents-toggle" class="button button--small button--tertiary nav-toggle">Table of Contents</a>
  <a href="#contents-toggle" class="button button--small button--tertiary nav-toggle--dummy">Table of Contents</a>
  <ul class="article-list nav-toggleHide">
    
      
      <li class="article-item ">
        <a href="/contribute/index.html">Overview</a>
      </li>
    
      
      <li class="article-item  nav-item--active">
        <a href="/contribute/building_crosswalk.html">Building Crosswalk</a>
      </li>
    
      
      <li class="article-item ">
        <a href="/contribute/contributing-code.html">Contributing code</a>
      </li>
    
      
      <li class="article-item ">
        <a href="/contribute/coding_style.html">Coding style</a>
      </li>
    
      
      <li class="article-item ">
        <a href="/contribute/downstream-chromium.html">Downstream Chromium</a>
      </li>
    
      
      <li class="article-item ">
        <a href="/contribute/reviewer_policy.html">Reviewer policy</a>
      </li>
    
      
      <li class="article-item ">
        <a href="/contribute/report_bugs.html">Report bugs</a>
      </li>
    
  </ul>
</nav>
<article class="article article--withSide">
  <h1>Building Crosswalk</h1>
<h2>Environment</h2>
<ol>
<li><p>Please set up your build environment by following the instructions
on the Chromium wiki:</p>
<ul>
<li><a href="http://www.chromium.org/developers/how-tos/build-instructions-windows">Building on Windows</a></li>
<li><a href="http://code.google.com/p/chromium/wiki/LinuxBuildInstructionsPrerequisites">Building on Linux</a></li>
<li><a href="https://code.google.com/p/chromium/wiki/MacBuildInstructions">Building on Mac</a></li>
</ul>
</li>
<li><p>You need to install extra pre-requisites if you&#39;re building Crosswalk
for Android, covered in <a href="http://code.google.com/p/chromium/wiki/AndroidBuildInstructions">building Chrome for Android</a>.</p>
<p>The
<a href="#contribute/building_crosswalk/Building-Crosswalk-for-Android">section below</a>
summarises the steps involved.</p>
</li>
<li><p><a href="http://www.chromium.org/developers/how-tos/install-depot-tools">depot_tools</a>
contains the following tools, used to manage and build Crosswalk from
source:</p>
<ul>
<li><code>gclient</code> manages code and dependencies.</li>
<li><code>ninja</code> is the recommended tool for building Crosswalk on most platforms.
Its <a href="http://code.google.com/p/chromium/wiki/NinjaBuild">website</a>
contains detailed usage instructions.</li>
</ul>

</li>
</ol>
<h2>Proxy setup</h2>
<p>If you are behind a network proxy, you need to make sure your environment is
properly set up and the appropriate variables are set. On Linux, you need to do
at least the following:</p>
<ol>
<li><p>Set the <code>http_proxy</code> and <code>https_proxy</code> environment variables.</p>
<pre><code> export http_proxy=http://example-host:port
 export https_proxy=http://example-host:port</code></pre>
</li>
<li><p>Create a Boto configuration file somewhere with the following contents:</p>
<pre><code> [Boto]
 proxy = example-host
 proxy_port = port number</code></pre>
<p> After that, point the <code>NO_AUTH_BOTO_CONFIG</code> environment variable to the file
 you created:</p>
<pre><code> export NO_AUTH_BOTO_CONFIG=/path/to/boto-file</code></pre>
</li>
</ol>
<h2>Download the Crosswalk source</h2>
<h3>Before starting: Android</h3>
<p>If you are building Crosswalk for Android, you should first set the
<code>XWALK_OS_ANDROID</code> environment variable:</p>
<pre><code>export XWALK_OS_ANDROID=1</code></pre>
<p>It&#39;s essential that you do this, otherwise your checkout will not
contain the necessary components for the Android build.</p>
<p>If you checkout the source without this setting, you can set it later
and do <code>gclient sync</code> again to pull in the extra Android-specific
components.</p>
<h3>Fetch the source</h3>
<ol>
<li><p>Create a source directory:</p>
<pre><code>cd &lt;home directory&gt;
mkdir crosswalk-src
cd crosswalk-src</code></pre>
</li>
<li><p>Auto-generate gclient&#39;s configuration file (<code>.gclient</code>):</p>
<pre><code>gclient config --name=src/xwalk \
  git://github.com/crosswalk-project/crosswalk.git</code></pre>
<p>You can replace <code>git://</code> with <code>ssh://git@</code> to use your
GitHub credentials when checking out the code.</p>
</li>
<li><p>From the same directory containing the <code>.gclient</code> file, fetch the source with:</p>
<pre><code>gclient sync</code></pre>
</li>
</ol>
<h3>Tracking a different Crosswalk branch</h3>
<p>If you want to track a Crosswalk branch other than <code>master</code>
(e.g. a beta or stable branch), there are two different approaches you can use,
described below.</p>
<p><em>Set the branch before the initial checkout</em></p>
<p>If you haven&#39;t Crosswalk&#39;s source code yet, just pass
the URL of the branch you want to checkout to the <code>gclient config</code> call.
For example, to track the <em>crosswalk-2</em> branch:</p>
<pre><code>gclient config --name=src/xwalk \
  git://github.com/crosswalk-project/crosswalk.git@origin/crosswalk-2</code></pre>
<p><em>Change the branch for an existing checkout</em></p>
<p>If you have already cloned Crosswalk and want to change the branch
being tracked, you need to check out a new git branch and then edit
your <code>.gclient</code> file.</p>
<p>For example, let&#39;s assume you want to track the <em>crosswalk-2</em> branch.
First of all, check out a new branch in your Crosswalk repository:</p>
<pre><code>cd /path/to/src/xwalk
git checkout -b crosswalk-2 origin/crosswalk-2</code></pre>
<p>Next, edit your <code>.gclient</code> file (generated above) and change the <code>url</code>
entry. It should look like this:</p>
<pre><code class="language-python">&quot;url&quot;: &quot;git://github.com/crosswalk-project/crosswalk.git@origin/crosswalk-2&quot;,</code></pre>
<p>After that, sync your code again:</p>
<pre><code>gclient sync</code></pre>
<h2>Building Crosswalk for desktop</h2>
<p>These instructions cover building Crosswalk to run in a desktop
environment (Windows, Linux, or Mac OS).</p>
<ol>
<li><p><code>gyp</code> is the tool used to generate Crosswalk projects. These projects
are then used as the basis for the actual code compilation.</p>
<p>To build the projects, go to the <code>src</code> directory and run:</p>
<pre><code>export GYP_GENERATORS=&#39;ninja&#39;
python xwalk/gyp_xwalk</code></pre>
</li>
<li><p>At this point you have built the projects with <code>gyp</code> and are ready for
the actual compilation. To build the Crosswalk launcher (which can
run a web application):</p>
<pre><code>ninja -C out/Release xwalk</code></pre>
</li>
</ol>
<h3>Testing a desktop build</h3>
<p>Once you&#39;ve built the launcher, the executable you need is at:</p>
<pre><code>~/crosswalk-src/src/out/Release/xwalk</code></pre>
<p>You can test it by using it to load an HTML file:</p>
<pre><code>~/crosswalk-src/src/out/Release/xwalk index.html</code></pre>
<p>If you don&#39;t have any HTML applications to test, the
<a href="/documentation/samples.html">Crosswalk samples</a> includes a few you can try.</p>
<h2>Building Crosswalk for Android</h2>
<p>As mentioned before, Crosswalk&#39;s build process for Android is heavily based on
Chrome&#39;s process, so make sure you are
<a href="http://code.google.com/p/chromium/wiki/AndroidBuildInstructions">familiar with it</a>.</p>
<ol>
<li><p>Install the dependencies for building Crosswalk for Android:</p>
<pre><code>sudo ./build/install-build-deps-android.sh</code></pre>
<p>Note that this requires support for <code>apt-get</code> on your system.
If you are on system without <code>apt-get</code> (like Fedora Linux), the
following command should install the dependencies:</p>
<pre><code>sudo yum install alsa-lib-devel alsa-lib-devel.i686 bison \
cairo-devel.i686 cups-devel cups-devel.i686 dbus-devel \
dbus-devel.i686 elfutils-libelf-devel.i686 elfutils-libelf-devel.x86_64 \
expat-devel expat-devel.i686 fontconfig-devel.i686 freetype-devel.i686 \
gcc-c++ gconf GConf2-devel GConf2-devel.i686 gconf-devel git \
glib2-devel.i686 glibc-devel.i686 gperf gtk2-devel harfbuzz-devel.i686 \
krb5-devel.i686 libcap-devel libcap-devel.i686 libcom_err-devel.i686 \
libgcrypt-devel libgcrypt-devel.i686 libgnome-keyring-devel \
libgpg-error-devel.i686 libgudev1-devel libpciaccess-devel \
libstdc++.i686 libX11-devel.i686  libXcomposite-devel.i686 \
libXcursor-devel.i686 libXdamage-devel.i686 libXext-devel.i686 \
libXfixes-devel.i686 libXi-devel.i686 libXrandr-devel.i686 \
libXrender-devel.i686 libXScrnSaver-devel libXtst-devel \
libXtst-devel.i686 lighttpd nss-devel nss.i686 pango-devel.i686 \
pciutils-devel pciutils-devel.i686 pulseaudio-libs-devel python-pexpect \
svn systemd-devel systemd-devel.i686 xorg-x11-server-Xvfb \
xorg-x11-utils zlib-devel.i686 zlib.i686</code></pre>
</li>
<li><p>Configure gyp.</p>
<p>gyp is the build system generator used in Chromium to generate actual build
files for Ninja and other systems. It needs a few variables in order to
generate build files for Android.</p>
<p>Have a file called <code>chromium.gyp_env</code> in the directory containing your
<code>.gclient</code> file (so the one above <code>src/</code>).</p>
<pre><code>echo &quot;{ &#39;GYP_DEFINES&#39;: &#39;OS=android target_arch=ia32&#39;, }&quot; &gt; chromium.gyp_env</code></pre>
<p>If you are building for ARM, use <code>target_arch=arm</code> instead of
<code>target_arch=ia32</code> above.</p>
</li>
<li><p>Set up the Android build environment.</p>
<p>For Crosswalk &gt; 5:</p>
<pre><code>. ./xwalk/build/android/envsetup.sh</code></pre>
<p>Or, if you are using Crossswalk &lt;= 5:</p>
<pre><code>. ./xwalk/build/android/envsetup.sh --target-arch=x86</code></pre>
<p>If you are targeting ARM, pass <code>--target-arch=arm</code> instead of
<code>--target-arch=x86</code>.</p>
</li>
<li><p>Configure your setup to generate the Crosswalk projects.</p>
<pre><code>export GYP_GENERATORS=&#39;ninja&#39;
python xwalk/gyp_xwalk</code></pre>
</li>
<li><p>To build xwalk core and runtime shell (for developer testing purposes,
not for end users), execute:</p>
<pre><code>ninja -C out/Release xwalk_core_shell_apk xwalk_runtime_shell_apk</code></pre>
<p>To build the xwalk runtime library apk (which can act as the runtime
for applications built in shared mode), execute:</p>
<pre><code>ninja -C out/Release xwalk_runtime_lib_apk</code></pre>
<p>To build a sample web app apk (for quick install/test on a target),
execute:</p>
<pre><code>ninja -C out/Release xwalk_app_template_apk</code></pre>
</li>
</ol>
<h3>Testing an Android build</h3>
<p>To test the runtime shell, install the runtime library and shell apks
on a physical device with:</p>
<pre><code>adb install -r out/Release/apks/XWalkRuntimeLib.apk
adb install -r out/Release/apks/XWalkRuntimeClientShell.apk
adb shell am start -n org.xwalk.runtime.client.shell/org.xwalk.runtime.client.shell.XWalkRuntimeClientShellActivity</code></pre>
<p>If you don&#39;t have an Android device, you can use an Android virtual
device (AVD) for testing instead. The Crosswalk source actually contains
enough of the Android SDK to enable you to download, create and run an AVD.</p>
<p>To make an AVD, run the <code>android</code> tool first:</p>
<pre><code>src/third_party/android_tools/sdk/tools/android</code></pre>
<p>Then use it to install the <strong>Intel x86 Atom System Image</strong>, and
create an AVD using that. Make sure you allocate enough
<em>internal storage</em> and <em>SD card storage</em>: 1000MiB for each is
known to work.</p>
<h2>Building Crosswalk for Tizen</h2>
<p>If you are unfamiliar with the RPM packaging process on Tizen, please
consult the
<a href="https://source.tizen.org/documentation/reference/git-build-system">GBS documentation</a>.</p>
<p>Crosswalk&#39;s layout is a bit unusual, as it actually contains several
independent git and Subversion repositories in the same directory tree.
We employ some tricks to make it work with GBS, but it should all be
transparent to users - the only actual caveat is that GBS will
build <em>everything</em> that is in your source tree regardless of whether
it has been committed or not; that is, it always acts as if
the <code>--include-all</code> parameter has been passed to <code>gbs build</code>.</p>
<p>That said, building an RPM for Tizen (after properly setting up your
Tizen repositories) should be a matter of calling <code>gbs build</code>:</p>
<pre><code>cd /path/to/src/xwalk
gbs build -A i586</code></pre>
<p>By default, the generated RPM files end up in
<code>~/GBS-ROOT/local/repos/&lt;repository name&gt;/i586/RPMS</code>.</p>
<h3>Testing a Tizen build</h3>
<p>The steps for installing a Tizen rpm on a device are covered in
<a href="/documentation/getting_started/tizen_target_setup.html">Tizen target set up</a>.</p>
<p>Running an application on Tizen is covered in
<a href="/documentation/getting_started/run_on_tizen.html">Run on Tizen</a>.</p>
<h3>Incremental builds</h3>
<p>By default, each time you call <code>gbs build</code>, the Tizen build directory
will be erased and the build will start from scratch. To avoid that,
you can set a different build directory in the Tizen chroot,
outside <code>/home/abuild/rpmbuild</code>:</p>
<pre><code>gbs build -A i586 --define &#39;BUILDDIR_NAME /tmp/crosswalk-builddir&#39;</code></pre>
<h3>Troubleshooting</h3>
<ul>
<li>The directory you use as the GBS root must be an actual directory:
symbolic links can cause problems.</li>
<li>The GBS root directory must be on the same partition as your root
directory (<code>/</code>).</li>
</ul>
<h2>Running the test suites</h2>
<p>If you are interested in running Crosswalk&#39;s test suites, you can
build the test suites from the <code>src</code> directory with:</p>
<pre><code>ninja -C out/Release xwalk_unittest
ninja -C out/Release xwalk_browsertest</code></pre>
<p>Then run them with:</p>
<pre><code>./out/Release/xwalk_unitttest
./out/Release/xwalk_browsertest</code></pre>

  <footer class="article-next">
    


  </footer>
</article>


          
        </div>
      </div>
    </div>
    

       
    <hr class="footer-divider" style="margin-top:125px; margin-bottom:0px" />
    <div style="position:relative; top:-30px;">
       <a href="/"><img src="/assets/cw-logo-circle.png" width="60px" style="display:block; margin: 0 auto;" /></a>
    </div>
    <footer class="footer footer--documentation" >
      <div class="container" >
        <div class="row">
          <div class="grid-1-of-2">
            <img src="/assets/Twitter_logo_blue.png" width="20px" /> Follow  <a href="http://twitter.com/xwalk_project">@xwalk_project on Twitter</a> for the latest developer activities and project updates. <br/><br/>
          </div>

          <div class="grid-1-of-2">
             Latest blog post:</br>
              
              
                <b><a href="/blog">Crosswalk Project 14 Beta: Shared Mode, Chromium 43, WebCL, SIMD for asm.js</a></b><br/>
                &nbsp;(<span ><time class="js-vagueTime" datetime="Fri, 22 May 2015 12:00:00 GMT">2015-05-22T12:00</time></span>)
              
          </div>
        </div>
        <div class="row">
          <div class="grid-1-of-2">
            <b><a href="/feed.xml"><img src="/assets/rss-icon-16.gif" style="vertical-align:middle" /> RSS Feed</a></b><br/><br/>
          </div>
          <div>
             <a href="https://crosswalk-project.org/jira/secure/Dashboard.jspa">Issues</a> &nbsp;
             <a href="https://github.com/crosswalk-project">GitHub source</a> &nbsp;
             <a href="/sitemap.html">Sitemap</a> <br/>
          </div>
        </div>
        <div class="row">
            <small>
              The Crosswalk Project was created by the Intel Open Source Technology Center. Copyright © 2013–2015 Intel Corporation. All rights reserved. <a href="https://github.com/crosswalk-project/crosswalk-website/wiki/Privacy-Policy">Privacy policy</a>. *Other names and brands may be claimed as the property of others.
            </small>
        </div>
      </div>
    </footer>

    

    
    
      <!-- Google Tag Manager -->
      <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-WC843Q"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-WC843Q');</script>
      <!-- End Google Tag Manager -->
    
    <script src="/js/smoothScroll.js"></script>
    <script src="/js/vagueTime.js"></script>
    <!-- <script async defer src="/js/trmix.js"></script> -->
  </body>
</html>
